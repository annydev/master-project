<% layout('../shared/layouts/admin') -%>
<% block('title', "Edit category page") -%>

<% script('/js/modules/edit-categories-module.js') -%>

<!-- Page Heading -->
<div class="d-sm-flex align-items-center justify-content-between mb-4">
  <h1 class="h3 mb-0 text-gray-800">Edit category name</h1>
</div>
<form class="user" action="/admin/categories/edit" method="post">
  <div class="card">
    <div class="card-body">
      <div class="input-group mb-3">
        <input type="hidden" name="id" value="<%= category._id %>">
        <input type="text" class="form-control editCategory" name="title" aria-label="Recipient's username"
          aria-describedby="button-addon2" value="<%= category.title %>">
        <div class="input-group-append">
          <button class="btn btn-primary" type="submit" id="button-addon2">Save</button>
        </div>
      </div>
    </div>
  </div>
</form>
<div class="d-sm-flex align-items-center justify-content-between my-4">
  <h1 class="h3 mb-0 text-gray-800">Subcategories</h1>
</div>
<!-- DataTales Example -->
<div class="card shadow mb-4">
  <div class="card-body card-bottom-border">
    <div class="input-group">
      <input type="hidden" id="subId" value="<%= category._id %>">
      <input type="text" class="form-control editCategory" id="titleSubcategory" name="titleSubcategory" value=""
        aria-label="Recipient's username" aria-describedby="button-addon2" placeholder="add new subcategory title">
      <div class="input-group-append">
        <button class="add-subcategory btn btn-primary btn-user btn-block" name="button" id="button-addon2">Add</button>
      </div>
    </div>
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
        <thead>
          <tr>
            <th> Subcategory name</th>
            <th style="width: 1px;"></th>
          </tr>
        </thead>
        <tbody>
          <% subcategories.forEach(function(subcategory) { %>
          <tr class="category">
            <td><%= subcategory.title %></td>
            <td>
              <div class="btn-group" role="group" aria-label="Basic example">
                <button type="button" class="btn btn-danger btn-sm delete-subcategory" data-id="<%= category._id %>">
                  <i class="fas fa-trash"></i></button>
              </div>
            </td>
          </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  </div>
</div>